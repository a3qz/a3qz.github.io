(this.webpackJsonprushin=this.webpackJsonprushin||[]).push([[0],{79:function(t,e,n){},81:function(t,e,n){},99:function(t,e,n){"use strict";n.r(e);var s,a=n(5),i=n(1),c=n.n(i),o=n(31),r=n.n(o),u=(n(79),n(63)),l=n(41),d=n.n(l),h=n(49),b=n(14),p=n(15),j=n(25),f=n(17),g=n(16),O=(n(81),["Angostura Bitters","Coke","Egg White","Gin","Ice Cube","Lemon Juice","Lime Wedge ","Mint","Orange Juice","Shake Drink","Simple Syrup","Stir Drink","Tequila","Triple Sec","Vermouth","Whiskey"]),m=n(136),v=n(44),k=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(b.a)(this,n),(s=e.call(this,t)).styles={root:{padding:5}},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsxs)(m.a,{children:["Glass Contents:",this.props.contents.map((function(e,n){return Object(a.jsx)(v.a,{styles:t.styles,children:e},n)}))]})}}]),n}(c.a.Component),C=n(135),x=n(62),y=n(132),L=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(b.a)(this,n),(s=e.call(this,t)).styles={root:{padding:5}},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{children:Object(a.jsx)(m.a,{horizontal:!0,children:this.props.list.map((function(e,n){return t.props.disabledList.includes(n)?"":Object(a.jsx)(v.a,{styles:t.styles,children:Object(a.jsx)(y.a,{onClick:function(){t.props.updateParent(n),console.log(t.props.disabledList,n)},hidden:t.props.disabledList.includes(n),disabled:t.props.selected==n,children:n})},n)}))})})}}]),n}(c.a.Component),S=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(b.a)(this,n),(s=e.call(this,t)).styles={root:{padding:5}},s}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{children:Object(a.jsx)(m.a,{children:this.props.list.map((function(e,n){return Object(a.jsx)(v.a,{styles:t.styles,children:Object(a.jsx)(y.a,{onClick:function(){t.props.submitAction(e)},children:O[e]})},n)}))})})}}]),n}(c.a.Component),N=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(t){var s;return Object(b.a)(this,n),(s=e.call(this,t)).state={selectedTarget:0},s.change=s.change.bind(Object(j.a)(s)),s}return Object(p.a)(n,[{key:"change",value:function(t){this.setState({selectedTarget:t})}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Target Cups:"}),Object(a.jsx)(L,{list:this.props.targetsList,disabledList:this.props.targetsDisabledList,updateParent:function(e){return t.change(e)},selected:this.state.selectedTarget}),Object(a.jsx)("label",{children:"Actions:"}),Object(a.jsx)(S,{list:this.props.actionsList,submitAction:function(e){return t.props.actionFunction(e,t.props.targetsDisabledList.includes(t.state.selectedTarget)?-1:t.state.selectedTarget)}})]})}}]),n}(c.a.Component),A=n(43),w=n(61);!function(t){t[t.Unassigned=0]="Unassigned",t[t.Assigned=1]="Assigned",t[t.Started=2]="Started",t[t.Resulted=3]="Resulted"}(s||(s={}));var T=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(t){var a;Object(b.a)(this,n),a=e.call(this,t);w.parse(window.location.search).room;var i=(new A.a).withUrl("https://schittalkin.azurewebsites.net/whiterushin/").configureLogging(A.b.Information).build();return a.state={hubConnection:i,glassContents:[],playerCount:0,actions:[],roundNumber:-1,cupNumber:-1,phase:s.Unassigned,results:[],teamName:"",cupLocks:[],resultsList:[],blockJoin:!1,final:!1},a.componentDidMount.bind(Object(j.a)(a)),a.renderGame.bind(Object(j.a)(a)),console.log(i),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.hubConnection.start();case 2:this.setupHub(this.state.hubConnection);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"reset",value:function(){this.setState({glassContents:[],results:[],cupLocks:[]})}},{key:"setupHub",value:function(t){var e=this;t.on("Assign",(function(t,n,s,a){console.log("cup: ".concat(t," actions: ").concat(n," playercount: ").concat(s," round number: ").concat(a)),e.setState({playerCount:s,roundNumber:a,cupNumber:t,actions:n})})),t.on("Start",(function(){console.log("started"),e.setState({phase:s.Started}),e.reset()})),t.on("UpdateCupState",(function(t){console.log("CupState: ".concat(t)),e.setState({glassContents:t})})),t.on("Result",(function(t){for(var n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),i=[t[a],t[n]];t[n]=i[0],t[a]=i[1]}0==t.reduce((function(t,e){return t+e}))&&e.setState({final:!0});e.setState({phase:s.Resulted,results:t})})),t.on("LockCup",(function(t){console.log("Locked ".concat(t)),e.setState({cupLocks:e.state.cupLocks.concat([t])}),console.log(e.state.cupLocks)}))}},{key:"renderGame",value:function(){var t=this;switch(this.state.phase){case s.Unassigned:return Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{placeholder:"Team Name",onChange:function(e,n){t.setState({teamName:null!==n&&void 0!==n?n:""})}}),Object(a.jsx)(x.a,{onClick:function(){console.log(t.state.teamName),t.state.hubConnection.invoke("Register",t.state.teamName),t.setState({blockJoin:!0})},text:"Join Game",disabled:this.state.blockJoin}),this.state.blockJoin?"Waiting for other bartenders":""]});case s.Assigned:return Object(a.jsx)("div",{children:"Please wait for the other bartenders to arrive"});case s.Started:return Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:["You are cup # ",this.state.cupNumber]}),Object(a.jsx)(N,{targetsList:Object(u.a)(Array(this.state.playerCount).keys()),targetsDisabledList:this.state.cupLocks,actionsList:this.state.actions,actionFunction:function(e,n){return t.state.hubConnection.invoke("SendAction",e,n)}}),Object(a.jsx)(k,{contents:this.state.glassContents.map((function(t){return O[t]}))}),Object(a.jsx)(y.a,{text:"Empty glass",disabled:this.state.cupLocks.includes(this.state.cupNumber),onClick:function(){return t.state.hubConnection.invoke("EmptyCup")}}),Object(a.jsx)(x.a,{text:"Serve Drink",disabled:this.state.cupLocks.includes(this.state.cupNumber),onClick:function(){t.state.hubConnection.invoke("SubmitCup")}})]});case s.Resulted:return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Customer comments"}),this.state.results.map((function(t){})),this.state.final?"You did it! Ask GC for your receipt":Object(a.jsx)(y.a,{text:"Reset",onClick:function(){console.log(t.state.hubConnection),t.state.hubConnection.invoke("Reset")}})]})}}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("title",{children:"White Rushin"}),this.renderGame()]})})}}]),n}(c.a.Component),D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,140)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),s(t),a(t),i(t),c(t)}))};r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),D()}},[[99,1,2]]]);
//# sourceMappingURL=main.5a22851a.chunk.js.map